import "math.mscript";
import "util.mscript";
import "terrain_generation_common.mscript";

bool inited = false;
int stuff = 10;
int[] stuffs = NULL;
vec3[] vecs = [];
vec3 it = 4*4*vec3(1, 2, 3)*4;
vec3 UP = vec3(0.0, 1.0, 0.0);

int run(int n0, int n1, file* file_ptr) {
    print("------------------------------\n");
    print("-------------RUN--------------\n");
    print("------------------------------\n");
    int i;
    if (!inited) {
        stuffs = [];
        for (i = 0; i <= 100; i++) {
            stuffs[stuffs.length] = 5 * i;
            vecs[vecs.length] = vec3(1, 2, 3);
        }
        inited = true;
    }

    it = it + vec3(1.0, 2.0, 3.0);
    print("it = ", it, "\n");

    int n = n0 + n1; 

    int file_size = c_file_size(file_ptr);
    print("file_size = ", file_size, "\n");

    vec3 sub_vec = vec3(0.0, 0.0, 0.0) - vec3(1.0, 2.0, 3.0);
    print("sub_vec = ", sub_vec, "\n");

    vec3 test_scale1 = 100*vec3(1, 2, 3);
    print("test_scale1 = ", test_scale1, "\n");
    vec3 test_scale2 = vec3(1, 2, 3)*200 + vec3(1, 2, 3);
    print("test_scale2 = ", test_scale2, "\n");

    vec3 all = vec3(1.0, 2.0, 3.0);
    for (i = 0; i < 2; i++) {
        all = 2.0 * all;
    }
    print("all.x = ", all.x, "\n");
    print("all.y = ", all.y, "\n");
    print("all.z = ", all.z, "\n");
    for (i = 0; i < 10; i++) {
        all = all + vecs[i];
    }
    print("all = ", all, "\n");

    vec3 v0 = vec3(1, 2, 3);
    vec3 v1 = vec3(1, 2, 3);
    print("v0 = ", v0, "\n");
    print("v1 = ", v1, "\n");
    print("dot = ", vec3_dot(v0, v1), "\n");

    float ss = 25.0;
    ss = c_sqrt(ss);
    print("ss = ", ss, "\n");

    print("stuff = ", stuff, "\n");
    stuff = stuff + 100;

    print("fib(10) = ", fib(10, 1), "\n");

    vec3 v = vec3(100.0, 100.0, 0.0);
    print("v = ", v, "\n");
    v = vec3_normalize(v);
    print("v = ", v, "\n");

    for (i = 0; i < 4; i++) {
        float theta = i * 0.5 * PI;
        print("cos(", theta, ") = ", c_cos(theta), "\n");
        print("sin(", theta, ") = ", c_sin(theta), "\n");
    }
    print("UP = ", UP, "\n");

    //for (i = 0; i < stuffs.length; i++) {
        //print(i, ": ", stuffs[i], "\n");
        //stuffs[i] += 5;
    //}

    return 100;
}
