import "math.mscript";
import "util.mscript";
import "terrain_generation_common.mscript";

int fib1(int n) {
    if (n <= 0) {
        return 0;
    }
    else if (n == 1) {
        return 1;
    }
    else {
        return fib1(n - 1) + fib2(n - 2);
    }
}

int fib2(int n) {
    if (n <= 0) {
        return 0;
    }
    else if (n == 1) {
        return 1;
    }
    else {
        return fib2(n - 1) + fib1(n - 2);
    }
}

int fib(int n, int x) {
    if (n <= zero()) {
        return zero();
    }
    else if (n == one()) {
        return one();
    }
    else {
        return fib1(n - one()) + fib2(n - two());
    }
}

int zero() {
    return 0;
}

int one() {
    return 1;
}

int two() {
    return 2;
}

bool inited = false;
int stuff = 10;
int[] stuffs = NULL;
vec3[] vecs = [];

float vec3_dot(vec3 v0, vec3 v1) {
    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;
}

int run(int n0, int n1) {
    int i;
    if (!inited) {
        stuffs = [];
        for (i = 0; i <= 100; i++) {
            stuffs[stuffs.length] = 5 * i;
            vecs[vecs.length] = vec3(1, 2, 3);
        }
        inited = true;
    }

    int n = n0 + n1; 

    vec3 test_scale1 = 100*vec3(1, 2, 3);
    print("test_scale1 = ", test_scale1, "\n");
    vec3 test_scale2 = vec3(1, 2, 3)*200 + vec3(1, 2, 3);
    print("test_scale2 = ", test_scale2, "\n");

    vec3 all = vec3(4, 5, 6) + vec3(1, 2, 3) + 4*vec3(5, 5, 5);
    print("all.x = ", all.x, "\n");
    print("all.y = ", all.y, "\n");
    print("all.z = ", all.z, "\n");
    for (i = 0; i < 100; i++) {
        all = all + vecs[i];
    }
    print("all = ", all, "\n");

    vec3 v0 = vec3(1, 2, 3);
    vec3 v1 = vec3(1, 2, 3);
    print("v0 = ", v0, "\n");
    print("v1 = ", v1, "\n");
    print("dot = ", vec3_dot(v0, v1), "\n");

    float ss = 16.0;
    ss = c_sqrt(ss);
    print("ss = ", ss, "\n");

    print("stuff = ", stuff, "\n");
    stuff = stuff + 100;

    print("fib(10) = ", fib(10, 1), "\n");

    //for (i = 0; i < stuffs.length; i++) {
        //print(i, ": ", stuffs[i], "\n");
        //stuffs[i] += 5;
    //}

    return 100;
}
