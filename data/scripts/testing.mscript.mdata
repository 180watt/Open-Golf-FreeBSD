data data c3RydWN0IGJhciB7CiAgICBpbnQgc3VtOwp9CgpzdHJ1Y3QgZm9vIHsKICAgIGludCB4LCB5OwogICAgYmFyIGI7Cn0KCnN0cnVjdCB1aV9idXR0b24gewogICAgYm9vbCBpc19jbGlja2VkLCBpc19ob3ZlcmVkOwogICAgdmVjMiBwb3MsIHNpemU7Cn0KCnVpX2J1dHRvbiB1aV9idXR0b25fY3JlYXRlKCkgewogICAgdWlfYnV0dG9uIGJ1dHRvbiA9IHsKICAgICAgICBpc19jbGlja2VkID0gZmFsc2UsCiAgICAgICAgaXNfaG92ZXJlZCA9IGZhbHNlLAogICAgICAgIHBvcyA9IHZlYzIoMCwgMCksCiAgICAgICAgc2l6ZSA9IHZlYzIoMCwgMCkKICAgIH07CiAgICByZXR1cm4gYnV0dG9uOwp9Cgp2b2lkIHVpX2J1dHRvbl91cGRhdGUodWlfYnV0dG9uICpidXR0b24pIHsKICAgIGJ1dHRvbi0+aXNfaG92ZXJlZCA9IHRydWU7CiAgICBidXR0b24tPmlzX2NsaWNrZWQgPSB0cnVlOwp9Cgp2b2lkIGRvX3N0dWZmX2Zvbyhmb28qIGYpIHsKICAgIGYtPmIuc3VtID0gZi0+eCArIGYtPnk7Cn0KCnZvaWQgZG9fc3R1ZmZfYmFyKGJhciAqYikgewogICAgYi0+c3VtID0gMDsKfQoKaW50IHJ1bihpbnQgbjAsIGludCBuMSwgdm9pZCogZmlsZV9wdHIpIHsKICAgIHVpX2J1dHRvbiBiID0gdWlfYnV0dG9uX2NyZWF0ZSgpOwogICAgcHJpbnQoImJ1dHRvbiA9ICIsIGIsICJcbiIpOwogICAgdWlfYnV0dG9uX3VwZGF0ZSgmYik7CiAgICBwcmludCgiYnV0dG9uID0gIiwgYiwgIlxuIik7CgogICAgZmxvYXQgcyA9IHNpbigxMDApOwoKICAgIGZvbyBmID0geyB4ID0gbjAsIHkgPSBuMSwgYiA9IHsgc3VtID0gMCB9IH07CiAgICBmb28gZyA9IHsgeCA9IDEsIHkgPSAyLCBiID0geyBzdW0gPSAwIH0gfTsKCiAgICBkb19zdHVmZl9mb28oJmYpOwogICAgcHJpbnQoImYgPSAiLCBmLCAiLCBnID0gIiwgZywgIlxuIik7CgogICAgZG9fc3R1ZmZfZm9vKCZnKTsKICAgIHByaW50KCJmID0gIiwgZiwgIiwgZyA9ICIsIGcsICJcbiIpOwoKICAgIGRvX3N0dWZmX2JhcigmKGYuYikpOwogICAgcHJpbnQoImYgPSAiLCBmLCAiLCBnID0gIiwgZywgIlxuIik7CgogICAgZG9fc3R1ZmZfYmFyKCYoZy5iKSk7CiAgICBwcmludCgiZiA9ICIsIGYsICIsIGcgPSAiLCBnLCAiXG4iKTsKCiAgICByZXR1cm4gMTAwOwp9Cg==
